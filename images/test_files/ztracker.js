/*! @ztracker --v1.1.28 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ztracker=t():e.ztracker=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>q});var n,r,o="https://log.adtimaserver.vn",i="https://s.zzcdn.me";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===a(i)?i:String(i)),r)}var o,i}!function(e){e[e.BUTTON=1]="BUTTON",e[e.LINK=2]="LINK",e[e.STANDARD=3]="STANDARD"}(n||(n={})),function(e){e.PAGEVIEW="pageview",e.VIEWABLE="viewable",e.CONVERSION="conversion",e.EVENT="event"}(r||(r={}));var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new Date;r&&1==r?o=new Date(o.getTime()+1e3*n):o.setDate(o.getDate()+n);var i=encodeURIComponent(t)+"; expires="+o.toUTCString()+"; path=/";document.cookie=e+"="+i}},{key:"get",value:function(e){var t=document.cookie.split(";"),n=null;return t.forEach((function(t){var r=t.split("="),o=r[0].replace(/^\s+|\s+$/g,"").trim();("string"==typeof e?o===e:e.test(o))&&r[1]&&(n=[o,decodeURIComponent(r[1].replace(/^\s+|\s+$/g,""))])})),n}}],(n=null)&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const u=l;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===s(i)?i:String(i)),r)}var o,i}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"docActive",value:function(){var e,t,n={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in n)if(e in document){t=n[e];break}return function(n){return n&&document.addEventListener(t,n),!document[e]}}},{key:"randomNumber",value:function(){return Math.round(Math.random()*Math.pow(10,6)+(new Date).getTime())}},{key:"getParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.URL;e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=n.exec(t);return r&&r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):null}},{key:"acceptInspect",value:function(){try{return window.self!==window.top&&["localhost","log.adtimaserver.vn"].filter((function(e){return document.referrer.indexOf(e)>-1})).length>0}catch(e){return!0}}},{key:"isMobile",value:function(){var e=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase();return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}},{key:"getUID",value:function(){return new Promise((function(t){try{var n=u.get("adtima_uid");if(n&&!n[1].startsWith("2000"))t(n[1]);else if(window.ZA&&"function"==typeof window.ZA.getVisitorID)window.ZA.getVisitorID((function(e){u.set("adtima_uid",e),t(e)}));else{var r="https://za.zdn.vn/v3/za.js?"+Math.floor((new Date).getTime()/864e5);e.loadScript("zasdk",r).then((function(){}),(function(){return t("")})).catch((function(){return t("")})),document.addEventListener("ZA.onready",(function(){window.ZA.getVisitorID((function(e){u.set("adtima_uid",e),t(e)}))}))}}catch(e){t("")}}))}},{key:"loadScript",value:function(e,t){return new Promise((function(n,r){try{document.getElementById(e)&&n(!0);var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.id=e,o.src=t,o.onload=function(){return n(!0)},o.onerror=function(){return r()},document.head.appendChild(o)}catch(e){r()}}))}},{key:"loadStyle",value:function(e,t){var n=document.getElementById(e);n||((n=document.createElement("style")).innerHTML=t,n.id=e,document.head.appendChild(n))}},{key:"elementOrParentIsFixed",value:function(e){var t;if(null!==(t=Array.isArray(e)?e[0]:"string"==typeof e?document.querySelector(e):e))for(;"object"===s(t)&&"body"!==t.nodeName.toLowerCase();){if("fixed"===window.getComputedStyle(t).getPropertyValue("position").toLowerCase())return!0;t=t.parentElement}return!1}},{key:"includeTracking",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.id&&document.getElementById(t.id)){var n,r=document.getElementById(t.id);null!==r&&(null===(n=r.parentElement)||void 0===n||n.removeChild(r))}var o=new URL(e);if(o.searchParams.set("atmrk",Math.random().toString()),"complete"===document.readyState){var i,a=document.getElementById("trackheader");a||((a=document.createElement("div")).id="trackheader",a.setAttribute("style","overflow:hidden;width:0;height:0;padding:0;margin:0;position:relative;"),document.body.appendChild(a));var c=document.createElement("img");c.width=1,c.height=1,c.src=o.href,c.setAttribute("style","border:0;overflow:hidden;position:absolute;width:1px;height:1px;"),Object.keys(t).forEach((function(e){return c.setAttribute(e,t[e])})),null===(i=a)||void 0===i||i.appendChild(c)}else(new Image).src=o.href}},{key:"documentOnReady",value:function(){return new Promise((function(e){"complete"===document.readyState?e(document):document.addEventListener("readystatechange",(function(){"complete"===document.readyState&&e(document)}))}))}},{key:"json",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e&&e.length)return JSON.parse(e);throw new Error("Input empty!")}catch(e){return t?[]:{}}}},{key:"validatePixelId",value:function(e){return e&&e.length>15&&/^\d+$/.test(e)}}],(n=null)&&d(t.prototype,n),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const p=f;function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===v(i)?i:String(i)),r)}var o,i}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"enableDebugger",value:function(e){p.loadScript("eruda","".concat(i,"/ztr/eruda.min.js")).then((function(){document.onreadystatechange=function(){if("complete"===document.readyState){var t=document.createElement("div");t.style.position="relative",t.style.zIndex="999999999",document.body.appendChild(t),e=e||{container:t},window.eruda.init(e)}}}))}},{key:"printLog",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[].slice.call(t),o="number"==typeof r[0]?r.shift():0,i=[console.log,console.info,console.log,console.error];function a(e,t){var n,r,o=["#0573ff","#1191a6","#b3690e","#b30e0e"];return(e=[].slice.call(e)).unshift((n=o[t||0]||o[0],"display: inline-block; color: ".concat(r||"#fff","; background: ").concat(n,"; padding: 1px 4px; border-radius: 3px;"))),e.unshift("%cAdtimaPixel"),e}i[o].apply(console,a(r,o)),window.zlogs=window.zlogs||[],window.zlogs.push({log:r.join(";")})}}],(n=null)&&y(t.prototype,n),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const g=m;function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function E(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}var _=function(){function e(t){var n=t.pixelId,r=t.query;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"_referrer",document.referrer),E(this,"_query",void 0),E(this,"_pixelId",void 0),this._query=w(w({},r),{},{ver:"1.1.28",ref:this._referrer}),this._pixelId=n}var t,i,a;return t=e,(i=[{key:"addQuery",value:function(e,t){this._query[e]=t}},{key:"query",get:function(){return this._query}},{key:"pixelId",get:function(){return this._pixelId},set:function(e){this._pixelId=e}},{key:"pageView",value:function(){var e,t,n=w({type:r.PAGEVIEW,pId:this._pixelId},this._query);!isNaN(null===(e=window._ztrk)||void 0===e?void 0:e.ready)&&window._ztrk.ready>0&&(n.dur=Date.now()-window._ztrk.ready),p.includeTracking("".concat(o,"/tracklp?").concat(Object.keys(n).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(n[e]))})).join("&")),{"z2-type":"pv"}),"function"==typeof(null===(t=window.ztrDebug)||void 0===t?void 0:t.postMessage)&&window.ztrDebug.postMessage({type:r.PAGEVIEW,path:"/tracklp",data:n})}},{key:"logEvent",value:function(e){var t,n=e.type,r=e.value,i=e.attrs,a=void 0===i?{}:i,c=w({type:n,value:r,pId:this._pixelId},this._query);p.includeTracking("".concat(o,"/tracklp?").concat(Object.keys(c).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(c[e]))})).join("&")),a),"function"==typeof(null===(t=window.ztrDebug)||void 0===t?void 0:t.postMessage)&&window.ztrDebug.postMessage({type:n,path:"/tracklp",data:c})}},{key:"logConversion",value:function(e){var t,i=e.eventId,a=e.eventType,c=e.selector,l=e.value,u=void 0===l?"":l,s=e.stdParam,d=e.attrs,f=void 0===d?{}:d;if(this._pixelId){var v=w({pId:this._pixelId,eId:i,et:a,url:this._query.curl,value:u},this._query);if(s&&(v.stdParam=s),c){var y,m=(E(y={},n.BUTTON,"eclck"),E(y,n.LINK,"eurl"),E(y,n.STANDARD,"estd"),y);v[m[a]||"eclck"]=c}var g=p.getParam("zaclid")||sessionStorage.getItem("_zaclid");g&&(v.zaclid=g),p.includeTracking("".concat(o,"/ptrck/log?").concat(Object.keys(v).map((function(e){return"".concat(e,"=").concat(encodeURIComponent(v[e]))})).join("&")),f),"function"==typeof(null===(t=window.ztrDebug)||void 0===t?void 0:t.postMessage)&&window.ztrDebug.postMessage({type:r.CONVERSION,path:"/ptrck/log",data:v})}}}])&&k(t.prototype,i),a&&k(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();const I=_;function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function j(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function A(e,t,n){return(t=N(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===P(t)?t:String(t)}var D=[/_ladi_trck(.*)/gi],C=document.URL,L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,"_start",Date.now()),A(this,"_timer",void 0),A(this,"_scrollTopPercent",0),A(this,"_conversions",[]),A(this,"tracker",void 0),A(this,"_logs",[]),A(this,"onReady",p.documentOnReady()),this._timer={},window._ztrk=window._ztrk||{};var t,n=p.validatePixelId(window._ztrk.pid)&&window._ztrk.pid;!n&&document.currentScript&&(n=p.getParam("id",null===(t=document.currentScript)||void 0===t?void 0:t.getAttribute("src")),p.validatePixelId(n)&&(window._ztrk.pid=n));switch(p.getParam("_ztrdebug")){case"eruda":g.enableDebugger();break;case"true":p.acceptInspect()&&p.loadScript("ztrdebug","".concat(i,"/ztr/ztrdebug.js"));break;case"ver":alert("[Adtima Pixel] version: 1.1.28")}var r={adtid:p.getParam("adtid"),curl:C,uid:""};return["utm_ads","adtid"].forEach((function(e){var t=p.getParam(e);t&&(r[e]=t)})),D.forEach((function(e){var t=u.get(e);t&&(r[t[0]],t[1])})),this.tracker=new I({pixelId:n,query:r}),this.tracker.pageView(),this.init(),this}var t,a,c;return t=e,a=[{key:"version",get:function(){return"1.1.28"}},{key:"logs",get:function(){return this._logs}},{key:"signalsEvents",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift();try{switch(r){case"track":this.handleStandardEvent.apply(this,t);break;case"pageview":this.tracker.pageView();break;case"pid":var o=t.shift();if(!p.validatePixelId(o))throw new Error("Pixel ID invalid!");this.tracker.pixelId=o;break;default:throw new Error("No action found from ztracker")}}catch(e){g.printLog(2,"WARN",e.message||e.stack||e)}}},{key:"init",value:function(){var e=this,t=p.getParam("zaclid");Promise.all([this.onReady,this.getEvents()]).then((function(n){var r=z(n,2),o=r[0],i=r[1],a=p.json(sessionStorage.getItem("_eztrk")),c=[].concat(j(i),j(a.filter((function(e){return!i.find((function(t){return t.id===e.id}))}))));if(sessionStorage.setItem("_eztrk",JSON.stringify(c)),t&&sessionStorage.setItem("_zaclid",t),c.forEach((function(t){t.events.forEach((function(n){e._conversions.push({keys:n.keys,kind:n.kind,cid:t.id})}))})),e.handleViewable(o),e.handleFormEvents(o),e.handleElementEvents(o),window.ztrq=function(){return e.signalsEvents.apply(e,arguments)},Array.isArray(window._ztrk.queue))for(;window._ztrk.queue.length;){var l=window._ztrk.queue.shift();e.signalsEvents.apply(e,j(l))}}))}},{key:"getEvents",value:function(){var e=this;return new Promise((function(t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){if(200===n.status){var e=p.json(n.responseText);if(!e.result&&Array.isArray(e))return void t(e||[])}t([])}},n.onerror=function(){return t([])},n.open("GET","".concat(o,"/ptrck/events?pixelId=").concat(e.tracker.pixelId,"&url=").concat(encodeURIComponent(C)),!0),n.send()}))}},{key:"handleViewable",value:function(e){var t=this,n=e.body,o=e.documentElement,i=Math.max(n.scrollHeight,n.offsetHeight,o.clientHeight,o.scrollHeight,o.offsetHeight),a=i/100*30-window.innerHeight,c=i/100*60-window.innerHeight,l=i/100*90-window.innerHeight,u=function(){var e=(window.pageYOffset||o.scrollTop)-(o.clientTop||0),n=window.getComputedStyle(document.body);"hidden"===n.getPropertyValue("overflow").toLowerCase()||"fixed"===n.getPropertyValue("position").toLowerCase()||(t._scrollTopPercent=e/(i-window.innerHeight)*100),e>l&&!t._timer.viewStart?(t._timer.viewStart=(new Date).getTime(),t.tracker.logEvent({type:r.VIEWABLE,value:"view_area=90;duration=".concat(t._timer.viewStart-t._start),attrs:{"z2-type":"vp-end"}})):e>c&&!t._timer.viewMiddle?(t._timer.viewMiddle=(new Date).getTime(),t.tracker.logEvent({type:r.VIEWABLE,value:"view_area=60;duration=".concat(t._timer.viewMiddle-t._start),attrs:{"z2-type":"vp-mid"}})):e>a&&!t._timer.viewEnd&&(t._timer.viewEnd=(new Date).getTime(),t.tracker.logEvent({type:r.VIEWABLE,value:"view_area=30;duration=".concat(t._timer.viewEnd-t._start),attrs:{"z2-type":"vp-start"}}))};window.addEventListener("scroll",u),u()}},{key:"handleFormEvents",value:function(e){var t=this;e.querySelectorAll("form").forEach((function(e){e.addEventListener("submit",(function(){var n=p.elementOrParentIsFixed(e);return t.tracker.logEvent({type:r.EVENT,value:"cta=form_submit;view_percent=".concat(t._scrollTopPercent,";popup=").concat(JSON.stringify(n)),attrs:{"z2-type":r.EVENT}}),!0}),!1)}))}},{key:"handleElementEvents",value:function(e){var t=this;this._conversions.forEach((function(r){switch(r.kind){case n.BUTTON:var o=r.keys.split(",").map((function(e){return'[id*="'.concat(e,'"]')})),i=e.querySelectorAll(o.join(","));t._logs.push([o.join(","),i.length]),i.forEach((function(e){e.addEventListener("click",(function(){var n=p.elementOrParentIsFixed(e);return t.tracker.logConversion({eventId:r.cid,eventType:r.kind,selector:e.getAttribute("id"),value:"view_percent=".concat(t._scrollTopPercent,";popup=").concat(JSON.stringify(n)),attrs:{"z2-type":"convs"}}),!0}),!1)}));break;case n.LINK:var a=r.keys.split(",").filter((function(e){return C.indexOf(e)>-1}));a.length&&t.tracker.logConversion({eventId:r.cid,eventType:r.kind,selector:a.join(","),value:"view_percent=".concat(t._scrollTopPercent),attrs:{"z2-type":"convs"}})}})),e.querySelectorAll("a[href]").forEach((function(e){e.addEventListener("click",(function(){var n=p.elementOrParentIsFixed(e),o=e.getAttribute("href"),i=o.startsWith("tel:")?"tel":o.startsWith("mailto:")?"mail":"url";return t.tracker.logEvent({type:r.EVENT,value:"cta=".concat(i,";view_percent=").concat(t._scrollTopPercent,";popup=").concat(JSON.stringify(n)),attrs:{"z2-type":r.EVENT}}),!0}),!1)}))}},{key:"handleStandardEvent",value:function(){for(var e=this,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];if(r.length){var i=r.shift();this._conversions.forEach((function(t){if(t.kind===n.STANDARD){var o=t.keys.split(",").filter((function(e){return e===i}));o.length>0?e.tracker.logConversion({eventId:t.cid,eventType:t.kind,selector:o.join(","),stdParam:r[0]?JSON.stringify(r[0]):"",attrs:{"z2-type":"stde"}}):g.printLog(2,"WARN",'Event code "'.concat(i,'" not found!'))}}))}}}],a&&T(t.prototype,a),c&&T(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();const q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window._ztrk||{};if(!e.ready){window._ztrk=e,e.ready=Date.now();var t=new L,n=t.version,r=t.logs;e.version=n,e.logs=r}}();return t})()));